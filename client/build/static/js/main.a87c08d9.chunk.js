(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{20:function(e,t,a){},25:function(e,t,a){e.exports=a(54)},30:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(22),c=a.n(l),r=(a(30),a(1)),i=a(4),s=a(3),m=a(7),u=a.n(m),d=(a(20),function(){var e=Object(i.g)(),t=Object(n.useContext)(w),a=t.state,l=t.dispatch,c=Object(n.useState)(null),m=Object(r.a)(c,2),u=(m[0],m[1],Object(i.f)()),d=function(){localStorage.clear(),l({type:"CLEAR"}),u.push("/signin")},p=function(){return a?[o.a.createElement("li",null,o.a.createElement(s.b,{className:"/"===e.pathname&&"active",to:"/"},"Explore")),o.a.createElement("li",null,o.a.createElement(s.b,{className:"/followingposts"===e.pathname&&"active",to:"/followingposts"},"Home")),o.a.createElement("li",null,o.a.createElement(s.b,{className:"/profile"===e.pathname&&"active",to:"/profile"},"Profile")),o.a.createElement("li",null,o.a.createElement(s.b,{className:"/create"===e.pathname&&"active",to:"/create"},"Create Post")),o.a.createElement("button",{onClick:d,className:"btn waves-effect waves-light #4a148c purple darken-4 nav__btn",type:"submit",name:"action"},"Sign Out")]:[o.a.createElement("li",null,o.a.createElement(s.b,{className:"/signin"===e.pathname&&"active",to:"/signin"},"Login")),o.a.createElement("li",null,o.a.createElement(s.b,{className:"/signup"===e.pathname&&"active",to:"/signup"},"Signup"))]},f=function(e){var t=Object(n.useState)((function(){return window.matchMedia(e).matches})),a=Object(r.a)(t,2),o=a[0],l=a[1];return Object(n.useEffect)((function(){var t=window.matchMedia(e);l(t.matches);var a=function(e){return l(e.macthes)};return t.addListener(a),function(){return t.removeListener(a)}}),[e]),o}("(max-width: 992px)");return o.a.createElement("nav",null,f?o.a.createElement(o.a.Fragment,null,o.a.createElement(s.b,{to:"#","data-target":"slide-out",className:"sidenav-trigger"},o.a.createElement("i",{className:"material-icons"},"menu")),o.a.createElement("div",{className:"nav-wrapper navbar"},o.a.createElement(s.b,{to:a?"/":"/signin",className:"brand-logo center navbar__logo"},"Instagram"),o.a.createElement("ul",{id:"slide-out",className:"sidenav show-on-large"},p()))):o.a.createElement("div",{className:"nav-wrapper navbar"},o.a.createElement(s.b,{to:"/",className:"brand-logo left navbar__logo"},"Instagram"),o.a.createElement("ul",{id:"nav-mobile",className:"right"},p())))});document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".sidenav");u.a.Sidenav.init(e)}));var p=a(6),f=a(11),h=a.n(f),g=function(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),i=Object(r.a)(c,2),s=i[0],m=i[1],d=Object(n.useContext)(w),f=d.state,g=d.dispatch;Object(n.useEffect)((function(){if(s){var e=new FormData;e.append("file",s),e.append("upload_preset","instagram"),e.append("cloud_name","dtxrrhfqj"),fetch("https://api.cloudinary.com/v1_1/dtxrrhfqj/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){fetch("/updatepic",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({dp:e.url})}).then((function(e){return e.json()})).then((function(e){console.log(e),localStorage.setItem("user",JSON.stringify(Object(p.a)(Object(p.a)({},f),{},{dp:e.dp}))),g({type:"UPDATEDP",payload:e.dp})}))})).catch((function(e){console.log(e)}))}}),[s]);return Object(n.useEffect)((function(){fetch("/mypost",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){l(e.mypost)}))}),[]),o.a.createElement(o.a.Fragment,null,a?o.a.createElement("div",{className:"profile"},o.a.createElement("div",{className:"profile__container"},console.log("Myposts",a),o.a.createElement("img",{className:"profile__dp",alt:"profile dp",src:f?f.dp:""}),o.a.createElement("i",{onClick:function(){var e=document.querySelectorAll(".modal");u.a.Modal.init(e),console.log("open")}(),className:"tiny material-icons editbtn home_icon modal-trigger",href:"#modal1","data-target":"modal1"},"create"),o.a.createElement("div",{id:"modal1",className:"modal"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"file-field input-field"},o.a.createElement("div",{className:"btn #d1c4e9 deep-purple lighten-4"},o.a.createElement("span",null,"Upload Dp"),o.a.createElement("input",{type:"file",onChange:function(e){return t=e.target.files[0],void m(t);var t}})),o.a.createElement("div",{className:"file-path-wrapper"},o.a.createElement("input",{className:"file-path validate",type:"text"}))),o.a.createElement("div",{class:"modal-footer"},o.a.createElement("a",{href:"/profile",className:"modal-close waves-effect  btn-flat modelfooter-close"},"Close")))),o.a.createElement("div",null,o.a.createElement("h4",null,null===f||void 0===f?void 0:f.name),o.a.createElement("h6",null,null===f||void 0===f?void 0:f.email),o.a.createElement("div",{className:"profile__infoSection"},o.a.createElement("h6",null,o.a.createElement("span",{className:"profile__details"},null===a||void 0===a?void 0:a.length),"posts"),o.a.createElement("h6",null,o.a.createElement("span",{className:"profile__details"},f?f.followers.length:"0"),"followers"),o.a.createElement("h6",null,o.a.createElement("span",{className:"profile__details"},f?f.following.length:"0"),"following")))),o.a.createElement("div",{className:"profile__gallery"},a.map((function(e){return o.a.createElement("img",{key:e._id,className:"profile__galleryimage",alt:e.title,src:e.photo})})))):o.a.createElement(h.a,{className:"loader",type:"Grid",color:"#e23e57",height:100,width:100,timeout:4e3}))};document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".modal");u.a.Modal.init(e)}));var E=function(){var e=Object(n.useState)(null),t=Object(r.a)(e,2),a=t[0],l=t[1],c=Object(n.useContext)(w),i=c.state;c.dispatch;Object(n.useEffect)((function(){fetch("/allpost",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){l(e.posts)}))}),[]);return o.a.createElement(o.a.Fragment,null,a?o.a.createElement("div",{className:"home"},a.map((function(e){return o.a.createElement("div",{className:"card home__card",key:e._id},o.a.createElement("h5",{className:"home__PostedBy"},o.a.createElement("div",{className:"topdp"},o.a.createElement("img",{className:"profile__dpofPost",alt:"profile dp",src:e.postedBy.dp}),o.a.createElement(s.b,{className:"profile__Name",to:e.postedBy._id!==i._id?"/profile/".concat(e.postedBy._id):"/profile"},e.postedBy.name),e.postedBy._id===i._id&&o.a.createElement("i",{class:"tiny material-icons post_delbtn home_icon",onClick:function(){return t=e._id,void fetch("/deletepost/".concat(t),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){var t=a.filter((function(t){return t._id!==e._id}));l(t)}));var t}},"delete_forever"))),o.a.createElement("div",{className:"card-image home__cardImage"},o.a.createElement("img",{className:"home__Image",alt:"homeCard",src:e.photo})),o.a.createElement("div",{className:"card-content"},o.a.createElement("i",{className:"tiny material-icons home_btn home_icon"},"favorite"),e.likes.includes(i._id)?o.a.createElement("i",{className:"tiny material-icons home_btn home_icon",onClick:function(){var t;t=e._id,fetch("/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id===e._id?e:t}));l(t)})).catch((function(e){console.log(e)}))}},"thumb_down"):o.a.createElement("i",{className:"tiny material-icons home_btn home_icon",onClick:function(){var t;t=e._id,fetch("/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id===e._id?e:t}));l(t)})).catch((function(e){console.log(e)}))}},"thumb_up"),o.a.createElement("h6",{className:"home_postLikes"},e.likes.length," likes"),o.a.createElement("h5",{className:"home__cardTitle"},e.title),o.a.createElement("p",{className:"home__carddesc"},e.body),o.a.createElement("h5",{className:"home__commentsTitle"},"Comments"),e.comments.map((function(t){return o.a.createElement("h6",{className:"home__commentsdesc",key:t._id},o.a.createElement("span",{className:"home__commentsname"},t.postedBy.name,"|"),o.a.createElement("i",{class:"tiny material-icons home_delbtn home_icon",onClick:function(){return n=t._id,e._id,void fetch("/deletecomment/".concat(n),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id===e._id?e:t}));l(t)})).catch((function(e){console.log(e)}));var n}},"delete_forever"),t.text)})),o.a.createElement("form",{onSubmit:function(t){var n,o;t.preventDefault(),n=t.target[0].value,o=e._id,fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:o,text:n})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id===e._id?e:t}));l(t)})).catch((function(e){console.log(e)}))}},o.a.createElement("input",{type:"text",placeholder:"add a comment"}))))}))):o.a.createElement(h.a,{className:"loader",type:"Grid",color:"#e23e57",height:100,width:100,timeout:4e3}))},_=function(){var e=Object(i.f)(),t=Object(n.useState)(""),a=Object(r.a)(t,2),l=a[0],c=a[1],m=Object(n.useState)(""),d=Object(r.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(""),g=Object(r.a)(h,2),E=g[0],_=g[1],v=Object(n.useState)(!1),b=Object(r.a)(v,2),y=b[0],j=b[1],N=Object(n.useState)(""),O=Object(r.a)(N,2),w=O[0],S=O[1],C=Object(n.useState)(void 0),I=Object(r.a)(C,2),k=I[0],A=I[1];Object(n.useEffect)((function(){k&&B()}),[k]);var B=function(){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(E)?(j(!0),fetch("/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l,password:p,email:E,dp:k})}).then((function(e){return e.json()})).then((function(t){t.error?(u.a.toast({html:t.error,classes:"#f44336 red"}),j(!1)):(u.a.toast({html:t.message,classes:"#00e5ff cyan accent-3"}),e.push("/signin"))})).catch((function(e){console.log(e)}))):u.a.toast({html:"invalid email",classes:"#f44336 red"})};return o.a.createElement("div",{className:"mycard"},o.a.createElement("div",{className:"card mycard__auth input-field"},o.a.createElement("h2",{className:"mycard__header"},"Instagram"),o.a.createElement("input",{type:"text",placeholder:"Name",value:l,onChange:function(e){return c(e.target.value)}}),o.a.createElement("input",{type:"email",placeholder:"Email",value:E,onChange:function(e){return _(e.target.value)}}),o.a.createElement("input",{type:"password",placeholder:"password",value:p,onChange:function(e){return f(e.target.value)}}),o.a.createElement("div",{className:"file-field input-field"},o.a.createElement("div",{className:"btn #d1c4e9 deep-purple lighten-4"},o.a.createElement("span",null,"Upload Dp"),o.a.createElement("input",{type:"file",onChange:function(e){return S(e.target.files[0])}})),o.a.createElement("div",{className:"file-path-wrapper"},o.a.createElement("input",{className:"file-path validate",type:"text"}))),o.a.createElement("button",{disabled:y,onClick:function(e){e.preventDefault(),w?function(){j(!0);var e=new FormData;e.append("file",w),e.append("upload_preset","instagram"),e.append("cloud_name","dtxrrhfqj"),fetch("https://api.cloudinary.com/v1_1/dtxrrhfqj/image/upload",{method:"POST",body:e}).then((function(e){return e.json()})).then((function(e){A(e.secure_url)})).catch((function(e){console.log(e)}))}():B()},className:"btn waves-effect waves-light mycard__btn",type:"submit",name:"action"},"Sign Up"),o.a.createElement("h5",null,o.a.createElement(s.b,{to:"/signin"},"Already have an account?"))))},v=function(){var e=Object(n.useContext)(w),t=(e.state,e.dispatch),a=Object(i.f)(),l=Object(n.useState)(""),c=Object(r.a)(l,2),m=c[0],d=c[1],p=Object(n.useState)(""),f=Object(r.a)(p,2),h=f[0],g=f[1],E=Object(n.useState)(!1),_=Object(r.a)(E,2),v=_[0],b=_[1];return o.a.createElement("div",{className:"mycard"},o.a.createElement("div",{className:"card mycard__auth input-field"},o.a.createElement("h2",{className:"mycard__header"},"Instagram"),o.a.createElement("input",{type:"email",placeholder:"Email",value:h,onChange:function(e){return g(e.target.value)}}),o.a.createElement("input",{type:"password",placeholder:"password",value:m,onChange:function(e){return d(e.target.value)}}),o.a.createElement("button",{onClick:function(e){e.preventDefault(),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(h)?(b(!0),fetch("/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:m,email:h})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error?(u.a.toast({html:e.error,classes:"#f44336 red"}),b(!1)):(localStorage.setItem("jwt",e.token),localStorage.setItem("user",JSON.stringify(e.user)),t({type:"USER",payload:e.user}),u.a.toast({html:"Signed in successfully",classes:"#00e5ff cyan accent-3"}),a.push("/"))})).catch((function(e){console.log(e)}))):u.a.toast({html:"invalid email",classes:"#f44336 red"})},disabled:v,className:"btn waves-effect waves-light mycard__btn",type:"submit",name:"action"},"Sign In"),o.a.createElement("h5",null,o.a.createElement(s.b,{to:"/signup"},"Create an account?"))))},b=a(24),y=function(){var e=Object(n.useState)(null),t=Object(r.a)(e,2),a=t[0],l=t[1],c=Object(n.useContext)(w),s=c.state,m=c.dispatch,u=Object(i.h)().userid,d=Object(n.useState)(!s||!s.following.includes(u)),f=Object(r.a)(d,2),g=f[0],E=f[1];Object(n.useEffect)((function(){fetch("/user/".concat(u),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e),l(e)}))}),[]);return o.a.createElement(o.a.Fragment,null,a?o.a.createElement("div",{className:"profile"},o.a.createElement("div",{className:"profile__container"},o.a.createElement("img",{alt:"profile dp",src:a.user.dp,className:"profile__dp"}),o.a.createElement("div",null,o.a.createElement("h4",null,null===a||void 0===a?void 0:a.user.name),o.a.createElement("h6",null,null===a||void 0===a?void 0:a.user.email),o.a.createElement("div",{className:"profile__infoSection"},o.a.createElement("h6",null,o.a.createElement("span",{className:"profile__details"},null===a||void 0===a?void 0:a.posts.length),"posts"),o.a.createElement("h6",null,o.a.createElement("span",{className:"profile__details"},null===a||void 0===a?void 0:a.user.followers.length),"followers"),o.a.createElement("h6",null,o.a.createElement("span",{className:"profile__details"},null===a||void 0===a?void 0:a.user.following.length),"following")),g?o.a.createElement("button",{onClick:function(){return fetch("/follow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({followId:u})}).then((function(e){return e.json()})).then((function(e){m({type:"UPDATE",payload:{following:e.following,followers:e.followers}}),localStorage.setItem("user",JSON.stringify(e)),l((function(t){return Object(p.a)(Object(p.a)({},t),{},{user:Object(p.a)(Object(p.a)({},t.user),{},{followers:[].concat(Object(b.a)(t.user.followers),[e._id])})})}))})),void E(!1)},className:"btn waves-effect waves-light follow__btn",type:"submit",name:"action"},"Follow"):o.a.createElement("button",{onClick:function(){return fetch("/unfollow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({unfollowId:u})}).then((function(e){return e.json()})).then((function(e){m({type:"UPDATE",payload:{following:e.following,followers:e.followers}}),localStorage.setItem("user",JSON.stringify(e)),l((function(t){var a=t.user.followers.filter((function(t){return t!==e._id}));return Object(p.a)(Object(p.a)({},t),{},{user:Object(p.a)(Object(p.a)({},t.user),{},{followers:a})})}))})),void E(!0)},className:"btn waves-effect waves-light follow__btn",type:"submit",name:"action"},"unFollow"))),o.a.createElement("div",{className:"profile__gallery"},null===a||void 0===a?void 0:a.posts.map((function(e){return o.a.createElement("img",{key:e._id,className:"profile__galleryimage",alt:e.title,src:e.photo})})))):o.a.createElement(h.a,{className:"loader",type:"Grid",color:"#e23e57",height:100,width:100,timeout:4e3}))},j=function(){var e=Object(i.f)(),t=Object(n.useState)(""),a=Object(r.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(""),m=Object(r.a)(s,2),d=m[0],p=m[1],f=Object(n.useState)(""),h=Object(r.a)(f,2),g=h[0],E=h[1],_=Object(n.useState)(""),v=Object(r.a)(_,2),b=v[0],y=v[1],j=Object(n.useState)(!1),N=Object(r.a)(j,2),O=N[0],w=N[1];Object(n.useEffect)((function(){b&&fetch("/createpost",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({title:l,photo:b,body:d})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.error?(u.a.toast({html:t.error,classes:"#f44336 red"}),w(!1)):(u.a.toast({html:"Posted successfully",classes:"#00e5ff cyan accent-3"}),e.push("/"))})).catch((function(e){console.log(e)}))}),[b]);return o.a.createElement("div",{className:"card input-field createPost"},o.a.createElement("input",{type:"text",placeholder:"title",onChange:function(e){return c(e.target.value)},value:l}),o.a.createElement("input",{type:"text",placeholder:"body",onChange:function(e){return p(e.target.value)},value:d}),o.a.createElement("div",{className:"file-field input-field"},o.a.createElement("div",{className:"btn #d1c4e9 deep-purple lighten-4"},o.a.createElement("span",null,"Upload Image"),o.a.createElement("input",{type:"file",onChange:function(e){return E(e.target.files[0])}})),o.a.createElement("div",{className:"file-path-wrapper"},o.a.createElement("input",{className:"file-path validate",type:"text"}))),o.a.createElement("button",{disabled:O,onClick:function(e){e.preventDefault(),w(!0);var t=new FormData;t.append("file",g),t.append("upload_preset","instagram"),t.append("cloud_name","dtxrrhfqj"),fetch("https://api.cloudinary.com/v1_1/dtxrrhfqj/image/upload",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){y(e.secure_url)})).catch((function(e){console.log(e)}))},className:"btn waves-effect waves-light mycard__btn",type:"submit",name:"action"},"POST"))},N=function(e,t){return"USER"===t.type?t.payload:"CLEAR"===t.type?null:"UPDATE"===t.type?Object(p.a)(Object(p.a)({},e),{},{followers:t.payload.followers,following:t.payload.following}):"UPDATEDP"===t.type?Object(p.a)(Object(p.a)({},e),{},{dp:t.payload}):e},O=function(){var e=Object(n.useState)(null),t=Object(r.a)(e,2),a=t[0],l=t[1],c=Object(n.useContext)(w),i=c.state;c.dispatch;Object(n.useEffect)((function(){fetch("/getSubposts",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){l(e.posts)}))}),[]);return o.a.createElement(o.a.Fragment,null,a?o.a.createElement("div",{className:"home"},a.map((function(e){return o.a.createElement("div",{className:"card home__card",key:e._id},o.a.createElement("h5",{className:"home__PostedBy"},o.a.createElement(s.b,{to:e.postedBy._id!==i._id?"/profile/".concat(e.postedBy._id):"/profile"},e.postedBy.name),e.postedBy._id===i._id&&o.a.createElement("i",{class:"tiny material-icons home_delbtn home_icon",onClick:function(){return t=e._id,void fetch("/deletepost/".concat(t),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){var t=a.filter((function(t){return t._id!==e._id}));l(t)}));var t}},"delete_forever")),o.a.createElement("div",{className:"card-image home__cardImage"},o.a.createElement("img",{className:"home__Image",alt:"homeCard",src:e.photo})),o.a.createElement("div",{className:"card-content"},o.a.createElement("i",{className:"tiny material-icons home_btn home_icon"},"favorite"),e.likes.includes(i._id)?o.a.createElement("i",{className:"tiny material-icons home_btn home_icon",onClick:function(){var t;t=e._id,fetch("/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id===e._id?e:t}));l(t)})).catch((function(e){console.log(e)}))}},"thumb_down"):o.a.createElement("i",{className:"tiny material-icons home_btn home_icon",onClick:function(){var t;t=e._id,fetch("/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id===e._id?e:t}));l(t)})).catch((function(e){console.log(e)}))}},"thumb_up"),o.a.createElement("h6",{className:"home_postLikes"},e.likes.length," likes"),o.a.createElement("h5",{className:"home__cardTitle"},e.title),o.a.createElement("p",{className:"home__carddesc"},e.body),o.a.createElement("h5",{className:"home__commentsTitle"},"Comments"),e.comments.map((function(t){return o.a.createElement("h6",{className:"home__commentsdesc",key:t._id},o.a.createElement("span",{className:"home__commentsname"},t.postedBy.name,"|"),o.a.createElement("i",{class:"tiny material-icons home_delbtn home_icon",onClick:function(){return n=t._id,e._id,void fetch("/deletecomment/".concat(n),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id===e._id?e:t}));l(t)})).catch((function(e){console.log(e)}));var n}},"delete_forever"),t.text)})),o.a.createElement("form",{onSubmit:function(t){var n,o;t.preventDefault(),n=t.target[0].value,o=e._id,fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:o,text:n})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id===e._id?e:t}));l(t)})).catch((function(e){console.log(e)}))}},o.a.createElement("input",{type:"text",placeholder:"add a comment"}))))}))):o.a.createElement(h.a,{className:"loader",type:"Grid",color:"#e23e57",height:100,width:100,timeout:4e3}))},w=Object(n.createContext)(),S=function(){var e=Object(i.f)(),t=Object(n.useContext)(w),a=(t.state,t.dispatch);return Object(n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"));t?a({type:"USER",payload:t}):e.push("/signin")}),[]),o.a.createElement(i.c,null,o.a.createElement(i.a,{exact:!0,path:"/"},o.a.createElement(E,null)),o.a.createElement(i.a,{path:"/signin"},o.a.createElement(v,null)),o.a.createElement(i.a,{exact:!0,path:"/profile"},o.a.createElement(g,null)),o.a.createElement(i.a,{path:"/signup"},o.a.createElement(_,null)),o.a.createElement(i.a,{path:"/create"},o.a.createElement(j,null)),o.a.createElement(i.a,{path:"/profile/:userid"},o.a.createElement(y,null)),o.a.createElement(i.a,{path:"/followingposts"},o.a.createElement(O,null)))};var C=function(){var e=Object(n.useReducer)(N,null),t=Object(r.a)(e,2),a=t[0],l=t[1];return o.a.createElement(w.Provider,{value:{state:a,dispatch:l}},o.a.createElement(s.a,null,o.a.createElement(d,null),o.a.createElement(S,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.a87c08d9.chunk.js.map